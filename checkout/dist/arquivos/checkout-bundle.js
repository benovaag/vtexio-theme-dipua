!function(){var e={760:function(e){var t=function(e){"use strict";var t,n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function define(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,n){return e[t]=n}}function wrap(e,t,n,o){var a=t&&t.prototype instanceof Generator?t:Generator,i=Object.create(a.prototype),s=new Context(o||[]);return r(i,"_invoke",{value:makeInvokeMethod(e,n,s)}),i}function tryCatch(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var l="suspendedStart",u="executing",d="completed",h={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var m={};define(m,i,(function(){return this}));var p=Object.getPrototypeOf,g=p&&p(p(values([])));g&&g!==n&&o.call(g,i)&&(m=g);var f=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(m);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){function invoke(n,r,a,i){var s=tryCatch(e[n],e,r);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){invoke("next",e,a,i)}),(function(e){invoke("throw",e,a,i)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return invoke("throw",e,a,i)}))}i(s.arg)}var n;r(this,"_invoke",{value:function enqueue(e,o){function callInvokeWithMethodAndArg(){return new t((function(t,n){invoke(e,o,t,n)}))}return n=n?n.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(e,t,n){var o=l;return function invoke(r,a){if(o===u)throw new Error("Generator is already running");if(o===d){if("throw"===r)throw a;return doneResult()}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var s=maybeInvokeDelegate(i,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===l)throw o=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=u;var c=tryCatch(e,t,n);if("normal"===c.type){if(o=n.done?d:"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=d,n.method="throw",n.arg=c.arg)}}}function maybeInvokeDelegate(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,maybeInvokeDelegate(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=tryCatch(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,h;var a=r.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function next(){for(;++r<e.length;)if(o.call(e,r))return next.value=e[r],next.done=!1,next;return next.value=t,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:t,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,r(f,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),r(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,c,"GeneratorFunction")),e.prototype=Object.create(f),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,s,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,n,o,r,a){void 0===a&&(a=Promise);var i=new AsyncIterator(wrap(t,n,o,r),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},defineIteratorMethods(f),define(f,c,"Generator"),define(f,i,(function(){return this})),define(f,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function next(){for(;n.length;){var e=n.pop();if(e in t)return next.value=e,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(resetTryEntry),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function handle(o,r){return i.type="throw",i.arg=e,n.next=o,r&&(n.method="next",n.arg=t),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;resetTryEntry(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:values(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},311:function(e){"use strict";e.exports=jQuery}},t={};function __webpack_require__(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,__webpack_require__),r.exports}!function(){"use strict";__webpack_require__(760);class CheckoutPosition{get currentPosition(){const e=window.location.href,t={"meu carrinho":["cart","email"],pagamento:["profile","shipping","payment"],confirmacao:["orderPlaced"]};for(let n in t)for(let o of t[n])if(e.includes(o))return n;return new Error(`unable to find current position from url ${e}\nAdd it to the positions object`),""}get currentPositionNumber(){const e=this.currentPosition;return["meu carrinho","pagamento","confirmacao"].indexOf(e)}addEvent(){window.addEventListener("hashchange",(()=>{this.update()}))}update(){const e=this.currentPositionNumber,t=document.querySelectorAll("[data-checkoutposition]");for(let n of t){n.dataset.checkoutposition<=e?n.classList.add("checkout-position__circle--active"):n.classList.remove("checkout-position__circle--active")}}}function espereElementoExistir(e){let{seletorCss:t,tempoMaximo:n=12e4,intervalo:o=100}=e;return new Promise(((e,r)=>{const a=setInterval((()=>{const n=document.querySelector(t);n&&(e(n),clearInterval(a))}),o);setTimeout((()=>{clearInterval(a),r(new Error("Elemento não encontrado a tempo"))}),n)}))}class BotaoEmbagalagemContexto{constructor(e){this._ativo=!1,this.nomeProduto=e,this.$button=this.create()}get ativo(){return this._ativo}set ativo(e){this._ativo=e}create(){const e=document.createElement("button");return e.classList.add("checkout__specialButton"),e.classList.add("checkout__specialButton--bag"),e.innerHTML="embalar para presente",e}}function asyncGeneratorStep(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}class ProductMessageController{create(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.active=!1,this.productName=e,this.isDesktop=t;let n=document.createElement("button");return n.classList.add("checkout__specialButton","sendMessageButton"),n.innerHTML="Enviar Mensagem",n.id=this.productName,t||n.classList.add("mobileMessageButton"),n.onclick=this.addMessage.bind(this),sessionStorage.getItem(this.productName)&&(n.classList.add("disabledButton"),n.innerHTML="Mensagem Adicionada",n.disabled=!0),n}addMessage(e){if(this.active=!this.active,this.active){e.target.classList.add("activeMessage");let t=document.createElement("tr");t.classList.add("messageRow");let n=document.createElement("td");n.setAttribute("colspan","100%");let o=document.createElement("div");o.classList.add("titleContainer");let r=document.createElement("div");r.classList.add("messageTitle"),r.innerText="Mensagem para o (a) presenteado (a)";let a=document.createElement("button");a.innerText="Excluir serviço",a.classList.add("removeButton"),a.id=`removeMessage${this.productName}`,a.onclick=this.removeMessageRow.bind(this);let i=document.createElement("textarea");i.classList.add("messageInput"),i.placeholder="Digite sua mensagem";let s=document.createElement("button");if(s.innerText="Adicionar Mensagem",s.classList.add("saveButton"),s.onclick=this.addMessageIntoOrderForm.bind(this),t.insertAdjacentElement("beforeend",n),n.insertAdjacentElement("beforeend",o),n.insertAdjacentElement("beforeend",i),n.insertAdjacentElement("beforeend",s),o.insertAdjacentElement("beforeend",r),o.insertAdjacentElement("beforeend",a),this.isDesktop){this.findEventElementByClassName(e,"product-item").insertAdjacentElement("afterend",t)}else document.getElementById(this.productName).insertAdjacentElement("afterend",t)}else{e.target.classList.remove("activeMessage"),document.getElementById(`removeMessage${this.productName}`).click()}}removeMessageRow(e){let t=this.findEventElementByClassName(e,"messageRow");t&&t.remove(),document.getElementById(this.productName).classList.remove("activeMessage"),this.active=!1}findEventElementByClassName(e,t){return(e.path||e.composedPath&&e.composedPath()).find((e=>e.classList.contains(t)))}addMessageIntoOrderForm(e){var t=this;return function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,o,r,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,o,r,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){let n=t.findEventElementByClassName(e,"messageRow").getElementsByClassName("messageInput")[0].value,o=`Mensagem do produto ${t.productName}: `;n=`${o}${n}`;let r=(yield vtexjs.checkout.getOrderForm()).openTextField;r&&r.value?(r=r.value,r=r.replace("Sem mensagem inserida",""),r=r.split("||"),r=r.filter((e=>!e.includes(o))),r.push(n),r=r.filter((e=>""!==e)).join("||")):r=n,yield vtexjs.checkout.sendAttachment("openTextField",{value:r});let a=document.getElementById(t.productName);a.innerText="Mensagem Adicionada",a.classList.add("disabledButton"),a.setAttribute("disabled",!0),sessionStorage.setItem(t.productName,"true")}))()}}function addBagComponent_asyncGeneratorStep(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function addBagComponent_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function _next(e){addBagComponent_asyncGeneratorStep(a,o,r,_next,_throw,"next",e)}function _throw(e){addBagComponent_asyncGeneratorStep(a,o,r,_next,_throw,"throw",e)}_next(void 0)}))}}function addBagComponent(){return _addBagComponent.apply(this,arguments)}function _addBagComponent(){return(_addBagComponent=addBagComponent_asyncToGenerator((function*(){yield espereElementoExistir({seletorCss:".table.cart-items .product-item"});const e=new BagComponent;e.addButton(),e.addCloseEventToBagList(),e.renderPackingList(),e.adjustPositionBagList(),e.reder(),e.handlePackaging(),e.addEventRemoveItemCart(),e.verifyIfHaveMessage()}))).apply(this,arguments)}class BagComponent{constructor(){this.button=this.createButton(),this.bagList=document.querySelector("#checkout-packaging"),this.nameContainerList=document.querySelector("td.product-name"),this.classHideElement="checkout-packaging__container--hidden",this.idlist=this.getPackageIds(),this._containerVisible=!1,this._itensComSacola=[],this.selerID=void 0,this.skuID=void 0,this.nomesDeSacolas=[],this.sacolaTemEvento=!1,this.timer=0}verificaSeBotaoExiste(e,t){return!!e.querySelector(t)}get itensComSacola(){return this._itensComSacola}set itensComSacola(e){var t=this;this._itensComSacola=e;document.querySelector("#cart-note").innerHTML=e.join(", ");const n=e.length;addBagComponent_asyncToGenerator((function*(){const e=(yield vtexjs.checkout.getOrderForm()).items.findIndex((e=>e.id==t.skuID));if(e>-1){const t=[{index:e,quantity:n}];yield vtexjs.checkout.updateItems(t)}else window.vtexjs.checkout.addToCart([{id:t.skuID,quantity:n,seller:t.selerID}])}))()}adjustQuantityCart(){var e=this;return addBagComponent_asyncToGenerator((function*(){let t=0;const n=yield vtexjs.checkout.getOrderForm(),o=n.items.findIndex((t=>t.id==e.skuID));if(e.itensComSacola.forEach((e=>{let o=n.items.find((t=>t.name===e));o&&(t+=o.quantity)})),t)if(o>-1){const e=[{index:o,quantity:t}];yield vtexjs.checkout.updateItems(e)}else window.vtexjs.checkout.addToCart([{id:e.skuID,quantity:t,seller:e.selerID}])}))()}handlePackaging(){var e=this;return addBagComponent_asyncToGenerator((function*(){yield espereElementoExistir({seletorCss:`tr[data-sku="${e.idlist[0]}"]`,tempoMaximo:3e4});setTimeout((()=>{const t=document.querySelector(`tr[data-sku="${e.idlist[0]}"]`);if(!t)return;if(t.classList.contains("sacolaTemEvento"))return;const n=e;t.querySelector(".item-link-remove").addEventListener("click",(()=>{n.itensComSacola=[]})),t.classList.add("sacolaTemEvento")}),500)}))()}get containerVisible(){return this._containerVisible}set containerVisible(e){this._containerVisible=e,this.bagList.classList.toggle(this.classHideElement,!e);const t=document.querySelectorAll(".checkout__specialButton--active");for(const e of t)e.classList.remove("checkout__specialButton--active")}reder(){const e=this.addButton.bind(this),t=document.querySelector(".table.cart-items");window.addEventListener("resize",e);const n=this;return new MutationObserver((()=>{e(),n.handlePackaging()})).observe(t,{attributes:!0,characterData:!0,childList:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1}),this}addButton(){if(window.innerWidth>=640){const e=document.querySelectorAll("td.product-name");for(const t of e){const e=new ProductMessageController,n=t.parentElement,o=n.querySelector(".product-name a").innerHTML,r=this.verificaSeBotaoExiste(n,".checkout__specialButton");if(!this.checaNomeDoProduto(o))if(r){const e=n.querySelector(".checkout__specialButton");!e.classList.contains("checkout__specialButton--active")&&this.nomeEstaNaDoc(o)&&e.classList.add("checkout__specialButton--active")}else t.append(this.createButton(o)),t.append(e.create(o))}return}const e=document.querySelectorAll("tr.product-item");e.forEach(((t,n)=>{const o=new ProductMessageController,r=t.nextElementSibling,a=t.querySelector(".product-name a").innerHTML;n===e.length-1&&(this.nomesDeSacolas.includes(a)||r||(t.after(o.create(a,!1)),t.after(this.createButton(a)))),r&&(r.classList.contains("checkout__specialButton")||(t.after(o.create(a,!1)),t.after(this.createButton(a))))}))}checaNomeDoProduto(e){return this.nomesDeSacolas.find((t=>new RegExp(e,"ig").test(t)))}adjustPositionBagList(){const e=document.querySelector("div.row-fluid.summary");return e.insertBefore(this.bagList,e.firstChild),this}createButton(e){const t=new BotaoEmbagalagemContexto(e),n=this,{$button:o}=t;return o.addEventListener("click",(o=>{n.addClassActiveButton(o,t),this.nomeEstaNaDoc(e)?(this.removeNomeDoProdutoDaLista(e),this.updateCustomDataOrderForm(this.itensComSacola)):(document.querySelector(".checkout-packaging-item__input").click(),this.updateCustomDataOrderForm(this.itensComSacola))})),this.nomeEstaNaDoc(e)?o.classList.add("checkout__specialButton--active"):o.classList.remove("checkout__specialButton--active"),o}nomeEstaNaDoc(e){return!!this.itensComSacola&&this.itensComSacola.includes(e)}addClassActiveButton(e,t){const{target:n}=e,o=n.matches(".checkout__specialButton--active");if(!this.containerVisible||!t.ativo&&o&&this.containerVisible||!t.ativo&&!o&&this.containerVisible||t.ativo&&!o&&this.containerVisible){this.bagList.dataset.nome=t.nomeProduto,this.showListOfBags();const e=t.nomeProduto.includes(t.nomeProduto);this.bagList.checked=e}else this.bagList.dataset.nome="",this.hiddenListOfBags();const r=this.nomeEstaNaDoc(t.nomeProduto);this.bagList.querySelector(".checkout-packaging-item__input").checked=r,r&&this.bagList.querySelector(".checkout-packaging__button").click(),t.ativo&&!o?t.ativo=!0:t.ativo=!t.ativo,n.classList.toggle("checkout__specialButton--active",t.ativo)}removeClassActiveButton(){this.button.classList.remove("checkout__specialButton--active")}showListOfBags(){this.containerVisible=!0}hiddenListOfBags(){this.containerVisible=!1}createPackaging(e){let{productName:t,price:n,imageUrl:o,sellersId:r,productId:a}=e;this.nomesDeSacolas.push(t);const i=document.createElement("li");i.classList.add("checkout-packaging-item");const s=document.createElement("img");s.src=o,s.classList.add("checkout-packaging-item__image");const c=document.createElement("h3");c.classList.add("checkout-packaging-item__title"),c.innerHTML=t;const l=document.createElement("p");l.classList.add("checkout-packaging-item__price"),l.innerHTML=n;const u=document.createElement("div");u.classList.add("checkout-packaging-item__input-wrapper");const d=document.createElement("input");d.classList.add("checkout-packaging-item__input"),d.type="radio",d.name="embalagem",d.value=a;const h=this;return d.addEventListener("click",(e=>{h.addPackagingToBag(e,{id:a,seller:r})})),u.append(d),i.append(u),i.append(s),i.append(c),i.append(l),i}addPackagingToBag(e,t){var n=this;let{id:o,seller:r}=t;return addBagComponent_asyncToGenerator((function*(){const t=e.target,a=n.bagList.dataset.nome,i=n.nomeEstaNaDoc(a);n.selerID=r,n.skuID=o,i?(t.checked=!1,n.itensComSacola=n.itensComSacola.filter((e=>e!==a))):(t.checked=!0,n.itensComSacola=[...n.itensComSacola,a])}))()}renderPackingList(){var e=this;return addBagComponent_asyncToGenerator((function*(){const t=e.bagList.querySelector("ul");for(let n of e.idlist){const o=yield e.getPackagingInformation(n);if(!o)continue;const r=e.createPackaging(o);t.append(r)}return yield e.pegaProdutosComSacola(),e}))()}hasPackaging(){var e=this;return addBagComponent_asyncToGenerator((function*(){return(yield vtexjs.checkout.getOrderForm()).items.some((t=>e.idlist.includes(t.id)))}))()}removeBagToCart(){var e=this;return addBagComponent_asyncToGenerator((function*(){const t=vtexjs.checkout.orderForm.items.findIndex((t=>t.id==e.skuID));if(t>-1){const e=[{index:t,quantity:0}];return yield vtexjs.checkout.removeItems(e)}return!1}))()}addCloseEventToBagList(){const e=this.bagList.querySelector("button");return e.addEventListener("click",this.hiddenListOfBags.bind(this)),e.addEventListener("click",this.removeClassActiveButton.bind(this)),this}getPackageIds(){return document.querySelector("listaidsembalagens").innerHTML.replace(/\s/g,"").split(",")}getPackagingInformation(e){return addBagComponent_asyncToGenerator((function*(){const t=`/giftbagapi/id${e}`;try{let o=yield(yield fetch(t,{method:"GET",headers:{Accept:"application/json"}})).json();o=o.data;const r=0,a=o.ImageUrl,i=o.SkuSellers[0].SellerId;return{productName:o.NameComplete.toLowerCase(),price:(n=r,new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(n)),imageUrl:a,sellersId:i,productId:e}}catch(e){return null}var n}))()}removeNomeDoProdutoDaLista(e){this.itensComSacola=this.itensComSacola.filter((t=>t!==e))}updateCustomDataOrderForm(e){return addBagComponent_asyncToGenerator((function*(){const t=(yield vtexjs.checkout.getOrderForm()).orderFormId,n={expectedOrderFormSections:["items","gifts","totalizers","clientProfileData","shippingData","paymentData","sellers","messages","marketingData","clientPreferencesData","storePreferencesData","customData"],value:JSON.stringify(e)},o={method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)},r=yield fetch("/api/checkout/pub/orderForm/"+t+"/customData/itenswithgiftbag/itensName",o);yield r.json()}))()}limparOrderFormCustomData(e,t,n){return addBagComponent_asyncToGenerator((function*(){const o=yield fetch("/api/checkout/pub/orderForm/"+e+"/customData/"+t+"/"+n,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});yield o.json()}))()}pegaProdutosComSacola(){return addBagComponent_asyncToGenerator((function*(){const e=yield vtexjs.checkout.getOrderForm();let t=[];e&&e.customData&&(t=JSON.parse(e.customData.customApps[0].fields.itensName));const n=Array.from(document.getElementsByClassName("product-item"));n&&n.forEach((e=>{let n=e.getElementsByClassName("product-name")[0].getElementsByTagName("a")[0].innerText;n&&t.find((e=>e===n))&&e.getElementsByClassName("checkout__specialButton--bag")[0].click()}))}))()}addEventRemoveItemCart(){Array.from(document.querySelectorAll("table.cart-items tbody"))[0].addEventListener("click",(e=>{if("item-link-remove"===e.target.getAttribute("class")){let t=(e.path||e.composedPath&&e.composedPath())[2].children[1].firstElementChild.innerText;setTimeout((()=>{this.removeNomeDoProdutoDaLista(t),this.updateCustomDataOrderForm(this.itensComSacola)}),1250)}}))}verifyIfHaveMessage(){return addBagComponent_asyncToGenerator((function*(){let e=(yield vtexjs.checkout.getOrderForm()).openTextField;e&&e.value&&""!==e.value||(yield vtexjs.checkout.sendAttachment("openTextField",{value:"Sem mensagem inserida"}))}))()}}function weAreEmptyCartPage(){return window.location.href.includes("/cart")}function sellerCodeForm_asyncGeneratorStep(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function sellerCodeForm_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function _next(e){sellerCodeForm_asyncGeneratorStep(a,o,r,_next,_throw,"next",e)}function _throw(e){sellerCodeForm_asyncGeneratorStep(a,o,r,_next,_throw,"throw",e)}_next(void 0)}))}}const e=".sellerCodeForm__button";const t=window.matchMedia("(max-width:768px)").matches;function alterarTamanhoImagemSrcVtex(e,t,n){if(void 0!==e)return t=void 0===t?1:t,n=void 0===n?t:n,e=e.replace(/\/(\d+)(-(\d+-\d+)|(_\d+))\//g,"/$1-"+t+"-"+n+"/");console.warn("Parametro 'src' não recebido.")}var n=__webpack_require__(311);var o=__webpack_require__(311);function RemoveOldPriceOfProductsThatAreNotOffCategory_asyncGeneratorStep(e,t,n,o,r,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}const r=".table.cart-items .product-item";const a=new class sellerCodeForm{constructor(){this._showInput=!0,this.$form=this.createElement(),this.$input=this.$form.querySelector(".sellerCodeForm__input"),this.$buttom=this.$form.querySelector(e),this.$result=this.$form.querySelector(".sellerCodeForm__result"),this.showInput=!0}start(){var e=this;return sellerCodeForm_asyncToGenerator((function*(){yield espereElementoExistir({seletorCss:".table.cart-items .product-item"});const t=e.getRegisteredCode();e.render(),e.showInput=null==t||""===t,e.$result.innerText=t||""}))()}getRegisteredCode(){return vtexjs.checkout.orderForm.marketingData?vtexjs.checkout.orderForm.marketingData.utmiCampaign:null}render(){document.querySelector(".totalizers.summary-totalizers.cart-totalizers").prepend(this.$form)}createElement(){let t=(new DOMParser).parseFromString('\n    <form\n        class="sellerCodeForm__container"\n    >\n        <label\n            class="sellerCodeForm__label"\n        >\n            Código do vendedor\n        </label>\n        <input\n            class="sellerCodeForm__input"\n            type="text"\n            placeholder="código do vendedor"\n        >\n        <input\n            type="button"\n            class="sellerCodeForm__button"\n            value="Adicionar"\n        >\n        <strong\n            class="sellerCodeForm__result sellerCodeForm__result--hidden"\n        ><strong>\n    </form>\n',"text/html");return t.querySelector(e).addEventListener("click",this.handleButton.bind(this)),t.body.firstChild}handleButton(){if(this.showInput){if(!this.inputIsValid())return;this.handleAddCoupon()}else this.handleRemoveCoupon();setTimeout((()=>{vtexjs.checkout.getOrderForm()}),1e3)}inputIsValid(){return this.$input.value.length>0}handleAddCoupon(){var e=this;return sellerCodeForm_asyncToGenerator((function*(){const t=e.getCode();(yield e.sendSellerCode(t)).ok&&(e.$result.innerText=t,e.showInput=!1)}))()}handleRemoveCoupon(){var e=this;return sellerCodeForm_asyncToGenerator((function*(){(yield e.sendSellerCode(null)).ok&&(e.$input.value="",e.showInput=!0)}))()}getCode(){return this.$input.value}sendSellerCode(e){return sellerCodeForm_asyncToGenerator((function*(){const t=vtexjs.checkout.orderForm.orderFormId;let n;n=null==vtexjs.checkout.orderForm.marketingData?null:vtexjs.checkout.orderForm.marketingData.coupon;const o={headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({utmSource:null,utmMedium:null,utmCampaign:null,utmipage:null,utmiPart:null,coupon:n,utmiCampaign:e,marketingTags:["vtexSocialSelling"]}),method:"POST"},r=`/api/checkout/pub/orderForm/${t}/attachments/marketingData`;return yield fetch(r,o)}))()}get showInput(){return this._showInput}set showInput(e){this._showInput=e,this.$form.classList.toggle("sellerCodeForm__container--result",!e),this.$input.classList.toggle("sellerCodeForm__input--hidden",!e),this.$result.classList.toggle("sellerCodeForm__result--hidden",e),this.$buttom.value=e?"adicionar":"remover"}},i=new class ButtonContinueShopping{constructor(){this.button=this.create()}init(){this.render(),this.controlTimeDisappear()}render(){document.querySelector(".cart-template.mini-cart.span4").append(this.button),this.ocultaSeTiverPaginaPagamento()}create(){const e=document.createElement("a");return e.classList.add("buttonContinueShopping__button"),e.innerText="Continuar Comprando",e.href="/",e}controlTimeDisappear(){window.addEventListener("hashchange",(()=>{this.ocultaSeTiverPaginaPagamento()}))}ocultaSeTiverPaginaPagamento(){this.button.classList.toggle("hidden",function weArePaymentPage(){return window.location.href.includes("/payment")}())}},s=new class RemoveOldPriceOfProductsThatAreNotOffCategory{constructor(){this.categoryId=7}start(){var e=this;return function RemoveOldPriceOfProductsThatAreNotOffCategory_asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function _next(e){RemoveOldPriceOfProductsThatAreNotOffCategory_asyncGeneratorStep(a,o,r,_next,_throw,"next",e)}function _throw(e){RemoveOldPriceOfProductsThatAreNotOffCategory_asyncGeneratorStep(a,o,r,_next,_throw,"throw",e)}_next(void 0)}))}}((function*(){yield espereElementoExistir({seletorCss:r}),e.handleRemove();!function observe(e,t){new MutationObserver((()=>{t()})).observe(e,{attributes:!0,characterData:!0,childList:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1})}(document.querySelector(".table.cart-items"),e.handleRemove.bind(e))}))()}handleRemove(){document.querySelectorAll(r).forEach(((e,t)=>{this.isFromTheCategory(t)||this.remove(e)}))}remove(e){const t=e.querySelector(".new-product-real-price"),n=e.querySelector(".total-price.hide");t&&n.remove(),t&&t.remove()}isFromTheCategory(e){return void 0!==vtexjs.checkout.orderForm.items[e].productCategories[this.categoryId]}};document.addEventListener("DOMContentLoaded",(()=>{const e=new CheckoutPosition;e.update(),e.addEvent(),i.init(),weAreEmptyCartPage()&&(takeCareIfShouldAddInputSeach(),addBagComponent(),a.start(),s.start()),window.addEventListener("orderFormUpdated.vtex",(()=>{setTimeout((()=>{document.querySelectorAll(".product-image img").forEach((e=>{e.src=alterarTamanhoImagemSrcVtex(e.src,80,120)}))}),1e4)}))})),window.addEventListener("hashchange",(()=>{weAreEmptyCartPage()&&(takeCareIfShouldAddInputSeach(),addBagComponent(),a.start())}));function takeCareIfShouldAddInputSeach(){const e=function createInputSeach(){let e=(new DOMParser).parseFromString('\n      <form\n        class="input-seach__container"\n      >\n        <input\n          id="inputSeach__input"\n          type="search"\n          autocomplete="on"\n          autofocus\n          class="input-seach__input"\n          placeholder="Digite sua busca"\n          required\n        />\n        <input\n          type="button"\n          class="input-seach__button"\n        />\n\n      </form>\n      ',"text/html").body.firstChild;return e.addEventListener("submit",(function handleForm(e){e.preventDefault();const{value:t}=inputSeach__input,{hostname:n}=window.location,o=`https://${n}/${t}`;window.location.href=o})),e}();document.querySelector(".empty-cart-title").after(e)}(new class CheckoutUI{constructor(){this.init(),t&&(this.selectors(),this.events(),this.setFooterDropdown())}selectors(){this.title=o(".footerCheckout__title"),this.contents=o(".footerCheckout__content")}events(){this.title.click(this.toggleFooterDropdown.bind(this))}setFooterDropdown(){for(let e=0;e<this.title.length;e++)this.title[e].classList.add("dropdown__title"),this.contents[e].classList.add("dropdown__content--closed")}toggleFooterDropdown(e){e.target.classList.toggle("closed"),e.target.nextElementSibling.classList.toggle("dropdown__content--closed")}init(){this.configThumb(),function waitForEl(e){return new Promise((t=>{!function waitForElCb(o){const r=n(o);r.length?t(r):setTimeout((function(){waitForElCb(e)}),100)}(e)}))}(".product-image img",this.resizeImages.bind(this)),o(window).on("orderFormUpdated.vtex",this.resizeImages.bind(this))}configThumb(){this.width=80,this.height=120}resizeImages(){setTimeout((()=>{document.querySelectorAll(".product-image img").forEach((e=>{e.src=alterarTamanhoImagemSrcVtex(e.src,this.width,this.height)}))}),2e3)}}).init();document.querySelector("link[rel~='icon']").href="/arquivos/favicon__dipua--transparent.ico"}()}();